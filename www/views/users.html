<ion-view title="Personnes">
  <div class="bar bar-subheader has-tabs-top item-input-inset">
    <label class="item-input-wrapper">
      <i class="icon ion-ios7-search placeholder-icon"></i>
      <input type="search" placeholder="Search" ng-model="search">
    </label>
    <button class="button button-clear" ng-click="search=''">Annuler</button>
  </div>
  <ion-content class="has-subheader">
    <div ng-if="user.active && data.users.length > 0">
      <ion-refresher pulling-text="Pull to refresh..." on-refresh="fn.refresh()"></ion-refresher>
      <div class="list">
        <!--<div class="item item-avatar" collection-repeat="user in data.users | filter:search" collection-item-width="'100%'" collection-item-height="75" style="height: 75px; left: 0; right: 0;" ui-sref="tabs.user({id: user.objectId})">-->
        <div class="item item-avatar" ng-repeat="user in data.users | filter:search" ui-sref="tabs.user({id: user.objectId})">
          <img ng-src="{{user.avatar || 'img/user.jpg'}}">
          <h2>{{user.pseudo}}</h2>
          <p>{{user.actualPurpose}}</p>
        </div>
      </div>
    </div>
    <div class="padding" style="text-align: center;" ng-if="user.active && data.users.length === 0">
      <h3>Aucun utilisateur à proximité :(</h3>
      <br><br>
      <button class="button button-positive" ng-click="data.users=null;fn.refresh()">Actualiser</button>
    </div>
    <loading ng-show="user.active && !data.users" top="100px"></loading>
    <div class="padding" ng-if="!user.active">
      Vous devez être actif pour voir les personnes autours de vous !
    </div>
  </ion-content>
</ion-view>
